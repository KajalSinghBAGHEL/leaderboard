<app-headers [backBtn]="false"></app-headers>
<ion-content [fullscreen]="true">
    <div class="float-right last-update-timestamp w-100 text-right">Last updated: {{currentDate | date:'dd MMMM yyyy'}}</div>
    <div class="main-container col-12 col-xl-11 p-0" id="main-container">
            <div class="position-relative knoldus-stats-container mb-4 mt-5 px-0">
                <div id="knoldus-stats-tooltip" class="shadow-sm knoldus-stats-tooltip p-2">
                    <span>Stats for Knoldus</span>
                    <div class="knoldus-stats-tooltip-legend">
                        <div class="bg-info border-light"></div>
                        All Time
                    </div>
                    <div class="knoldus-stats-tooltip-legend">
                        <div class="bg-color border-light"></div>
                        Current Month
                    </div>
                </div>
                <div *ngIf="reputation" class="scrolling-wrapper contribution-color">
                    <div *ngFor="let key of knoldusStatsReputationKeys" class="knoldus-stats-card card mx-1 mx-lg-0 py-2 border-0">
                        <div class="contribution-title text-center mb-1">
                            {{key | splitCamelCase | titlecase}}
                        </div>
                        <div class="d-flex contribution-count-block justify-content-between my-1 w-75 mx-auto">
                            <div class="contribution-count contribution-left">{{reputation[key].monthly}}</div>
                            <div class="contribution-count contribution-right">{{reputation[key].allTime}}</div>
                        </div>
                    </div>
                </div>
            </div>
            <ion-card class="leaderboard-table w-100 ion-no-padding ion-no-margin">
                <div class="container-fluid">
                    <div class="row d-flex align-items-center">
                        <div class="col-7 col-md-4 col-lg-3 py-1 current-month-signifier">
                            Summary of {{ currentDate | date: 'MMMM yyyy'}}
                        </div>
                        <div class="col-5 col-md-2 col-lg-2 py-1 scoring-info">
                            <div class="btn btn-outline-primary scoring-info-btn float-right float-md-left py-1 popover-wrapper">
                                 Scoring<div class="scoring-info-table">
                                    <div class="popover-content">
                                        <table class="popover-message">
                                            <tr>
                                                <th>Event</th>
                                                <th>Weightage</th>
                                                <th>Integration</th>
                                            </tr>
                                            <tr *ngFor="let contribution of scoringInfoData">
                                                <td>{{contribution.type}}</td>
                                                <td>{{contribution.weight}}</td>
                                                <td [ngClass]="contribution.integrated ? 'text-success' : 'text-danger'" [innerHTML]="contribution.symbol"></td>
                                            </tr>
                                        </table>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="search-bar-container col-12 col-md-6 py-1 col-lg-7">
                            <label class="p-0 m-0 col-12 col-md-8 float-right">
                                <input (keyup)="filterKnolderList()" [formControl]="searchBar"
                                       class="form-control w-100" placeholder="Search" type="text">
                                <img alt="search-logo" class="search-img" src="./assets/icon/search.svg"/>
                            </label>
                        </div>
                    </div>
                </div>
                <app-table (sortCriteria)="sortTable($event)" [tableHeading]="tableHeading" [tableRows]="filteredKnolderList"></app-table>
            </ion-card>
        </div>
</ion-content>

